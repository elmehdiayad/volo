<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />    
    <title>Contract {{contractNumber}}</title>
    <style>
      @page {
        size: A4;
        margin: 0;
      }
      body {
        font-family: Arial, sans-serif;
        line-height: 1.2;
        padding: 30px 12px 20px 12px;
        max-width: 210mm;
        font-size: 12px;
      }
      .contract-header {
        margin-bottom: 50px;
      }
      /* Separate styles for company logo */
      .company-logo {
        position: absolute;
        top: 12px;
        right: 18px;
        max-height: 70px;
        max-width: 150px;
        object-fit: contain;
      }
      /* Remove size constraints from header image */
      .car-image {
        position: absolute;
        top: 12px;
        right: 24px;
        max-height: 125px;
        object-fit: contain;
      }
      .main-title {
        text-align: center;
        font-weight: bold;
        font-size: 14px;
        margin-bottom: 30px;
      }
      .header-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
        margin: 8px 0;
      }
      .input-line {
        padding: 1px 4px;
        display: inline-block;
      }
      .drivers-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
        margin: 8px 0;
        border: 1px solid black;
        padding: 8px;
      }
      .driver-section {
        display: grid;
        gap: 4px;
      }
      .driver-header {
        font-weight: bold;
        margin-bottom: 6px;
      }
      .payment-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
        margin: 12px 0;
      }
      .payment-options {
        display: flex;
        gap: 12px;
        margin: 6px 0;
      }
      .checkbox-container {
        display: flex;
        align-items: center;
        gap: 4px;
      }
      .vehicle-section {
        border: 1px solid black;
        padding: 8px;
        margin: 12px 0;
        height: 130px;
        position: relative;
      }
      .vehicle-section-info {
        display: grid;
        grid-template-columns: 1fr;
        gap: 4px;
        margin-top: 10px;
      }
      .signature-section {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
        margin-top: 12px;
      }
      .signature-box {
        border: 1px solid black;
        height: 80px;
        margin-top: 4px;
        background-color: white;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: visible;
      }
      .signature-image {
        position: absolute;
        max-height: 160px;
        max-width: 160px;
        height: auto;
        width: auto;
        display: block;
        background-color: transparent;
        mix-blend-mode: multiply;
        z-index: 1;
      }
      .footer {
        text-align: center;
        position: absolute;
        margin-top: 12px;
        font-size: 10px;
        bottom: 12px;
        left: 0;
        right: 0; 
        margin: auto;
      }
      .terms-box {
        border: 1px solid black;
        padding: 8px;
        margin: 12px 0;
        font-size: 9px;
      }
      .observation-section {
        margin: 8px 0;
      }
      .observation-section .input-line {
        height: 30px;
      }
      .vehicle-status {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
        margin-top: 8px;
      }
      .status-checkbox {
        display: flex;
        gap: 8px;
      }
    </style>
  </head>
  <body>
    <div class="contract-header">
      <img
      class="company-logo"
      src="{{companyLogo}}"
      onerror="this.style.display='none'"
    />

    <div class="main-title">CONTRAT DE LOCATION VEHICULE</div>

    <div class="header-grid">
      <div>CONTRAT N°<span class="input-line">{{contractNumber}}</span></div>
      <div>DATE:<span class="input-line">{{date}}</span></div>
    </div>

    </div>
    
    <div class="drivers-grid">
      <div class="driver-section">
        <div class="driver-header">Conducteur (1)</div>
        <div>
          Nom:<span class="input-line" id="driver1-fullname"
            >{{driver1.fullname}}</span
          >
        </div>
        <div>
          Adresse:<span class="input-line" id="driver1-address"
            >{{driver1.address}}</span
          >
        </div>
        <div>
          N° CIN:<span class="input-line" id="driver1-nationalId"
            >{{driver1.nationalId}}</span
          >
        </div>
        <div>
          Valable jusqu'au:<span
            class="input-line"
            id="driver1-nationalIdExpiryDate"
            >{{driver1.nationalIdExpiryDate}}</span
          >
        </div>
        <div>
          N° Permis:<span class="input-line" id="driver1-license"
            >{{driver1.licenseId}}</span
          >
        </div>
        <div>
          Date d'obtention:<span class="input-line" id="driver1-license-date"
            >{{driver1.licenseDeliveryDate}}</span
          >
        </div>
        <div>
          N° Télephone:<span class="input-line" id="driver1-phone"
            >{{driver1.phone}}</span
          >
        </div>
      </div>
      {{#if driver2}}
      <div class="driver-section">
        <div class="driver-header">Conducteur (2)</div>
        <div>
          Nom:<span class="input-line" id="driver2-fullname"
            >{{driver2.fullname}}</span
          >
        </div>
        <div>
          Adresse:<span class="input-line" id="driver2-address"
            >{{driver2.address}}</span
          >
        </div>
        <div>
          N° CIN:<span class="input-line" id="driver2-nationalId"
            >{{driver2.nationalId}}</span
          >
        </div>
        <div>
          Valable jusqu'au:<span
            class="input-line"
            id="driver2-nationalIdExpiryDate"
            >{{driver2.nationalIdExpiryDate}}</span
          >
        </div>
        <div>
          N° Permis:<span class="input-line" id="driver2-license"
            >{{driver2.licenseId}}</span
          >
        </div>
        <div>
          Date d'obtention:<span class="input-line" id="driver2-license-date"
            >{{driver2.licenseDeliveryDate}}</span
          >
        </div>
        <div>
          N° Télephone:<span class="input-line" id="driver2-phone"
            >{{driver2.phone}}</span
          >
        </div>
      </div>
      {{/if}}
    </div>

    <div class="payment-grid">
      <div>
        <div>
          Prix/jours:<span class="input-line" id="price-per-day"
            >{{payment.pricePerDay}}</span
          >
        </div>
        <div>
          Nombre de jours:<span class="input-line" id="total-price"
            >{{payment.numberOfDays}} Jours</span>
        </div>
        <div>
          Total:<span class="input-line" id="total-price"
            >{{payment.totalPrice}}</span
          >
        </div>
        <div>
          Montant payé:<span class="input-line" id="total-price"
            >{{payment.paidAmount}}</span
          >
        </div>
        <div>
          Montant restant:<span class="input-line" id="total-price"
            >{{payment.restAmount}}</span
          >
        </div>
      </div>
      <div>
        <div>
          Date de départ:<span class="input-line" id="departure-date"
            >{{payment.fromDate}}</span
          >
        </div>
        <div>
          Date de restitution:<span class="input-line" id="return-date"
            >{{payment.toDate}}</span
          >
        </div>
        <div>
          Montant de la caution:<span class="input-line" id="deposit-amount"
            >{{payment.deposit}}</span
          >
        </div>
      </div>
    </div>

    <div>Mode de règlement:</div>
    <div class="payment-options">
      <div class="checkbox-container">
        <input type="checkbox" {{#if isCardPayment}}checked{{/if}} disabled />
        <span>Carte bancaire</span>
      </div>
      <div class="checkbox-container">
        <input type="checkbox" {{#if isCashPayment}}checked{{/if}} disabled />
        <span>Espèces</span>
      </div>
      <div class="checkbox-container">
        <input type="checkbox" {{#if isCheckPayment}}checked{{/if}} disabled />
        <span>Chèque</span>
      </div>
      <div class="checkbox-container">
        <input type="checkbox" {{#if isOtherPayment}}checked{{/if}} disabled />
        <span>Autre</span>
      </div>
    </div>

    <div class="vehicle-section">
      <div style="font-weight: bold">VEHICULE</div>
      <div class="vehicle-section-info">
        <span
          >Marque:<span class="input-line" id="vehicle-brand"
            >{{vehicle.brand}}</span
          ></span
        >
        <span
          >Immatriculation:<span class="input-line" id="vehicle-plate"
            >{{vehicle.plate}}</span
          ></span
        >
        <span
        >Année:<span class="input-line" id="vehicle-plate"
          >{{vehicle.year}}</span
        ></span
      >
        <span
          >Kilométrages:<span class="input-line" id="vehicle-mileage"
            >{{vehicle.mileage}}</span
          ></span
        >
        <span
          >Carburant:<span class="input-line" id="vehicle-type"
            >{{vehicle.type}}</span
          ></span
        >
      </div>
      <img
        class="car-image"
        src="{{carImage}}"
        onerror="this.style.display='none'"
      />
    </div>

    <div class="observation-section">
      <div>Observations:</div>
      <div class="input-line" style="height: 40px"></div>
    </div>

    <div class="terms-box">
      FACTURATION / CAUTION / FRANCHISE<br />
      La caution est égale au montant de la franchise<br /><br />
      Le locataire s'expose à des poursuites judiciaires si l'heure et la date
      de restitution du véhicule consentie ne sont pas respectées.<br />
      L'assurance ne couvre aucun risque en cas d'utilisation du véhicule par un
      conducteur non désigné sur le contrat, le client reconnait être
      responsable des frais de réparation non couvert par l'assurance. En cas de
      prolongation un nouveau contrat sera établi.
    </div>

    <div class="checkbox-container">
      <input type="checkbox" id="terms" />
      <label for="terms"
        >J'ai pris connaissance et j'accepte les termes et conditions imprimées
        aux deux faces de ce contrat.</label
      >
    </div>

    <div>
      Je reconnais être responsable des amendes, des violations du code de la
      route et de leurs conséquences éventuelles.
    </div>
    <div>
      En cas de vol ou d'accident responsable, la caution reste acquise au
      loueur
    </div>

    <div class="signature-section">
      <div>
        <div>Signature conducteur:</div>
        <div class="signature-box"></div>
      </div>
      {{#if driver2}}
      <div>
        <div>Signature 2éme conducteur:</div>
        <div class="signature-box"></div>
      </div>
      {{else}}
      <div>
        <div>Visa de la direction:</div>
        <div class="signature-box">
          <img
            class="signature-image"
            src="{{signature}}"
            onerror="this.style.display='none'"
          />
        </div>
      </div>
      {{/if}}
    </div>

    {{#if driver2}}
    <div class="signature-section">
      <div>
        <div>Visa de la direction:</div>
        <div class="signature-box">
          <img
            class="signature-image"
            src="{{signature}}"
            onerror="this.style.display='none'"
          />
        </div>
      </div>
    </div>
    {{/if}}

    <div class="footer"> 
      {{{supplier.bio}}}
    </div>
  </body>
</html>
